<div class="main-content">
  <div class="container-fluid">
    <div *ngIf= "loading && MeassageError && MeassageError.length>0">
      Error create cube ...
    </div>
    <div *ngIf= "loading && MeassageError && MeassageError.length == 0">
      cube created succes ...   
      <button   class="btn btn-primary btn-lg btn-block" (click)="reset()">OK</button>
     </div>
  <div *ngIf= "loading && !MeassageError" >
    starting create cube ...
    <div class="loader"> </div>
  </div>
  <div *ngIf="!loading">
    <mat-label>Select a server (*) </mat-label>
    <mat-form-field >
      <mat-select  id="selectedServerId" [(ngModel)]="selectedServerId" [compareWith]="comparer" >
        <mat-option *ngFor="let obj  of liste_des_serveur " [value]="obj" (click)="setserveur(obj.Id)">
           {{ obj.Name }} 
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-label>Select a data base (*) </mat-label>
    <mat-form-field >
     
      <mat-select  id="database-select" [(ngModel)]="selectedDatabase" required>
        <mat-option *ngFor="let obj  of liste_des_bd  " [value]="obj" (click)="setbasedonnees(obj.Name)"> {{ obj.Name }} </mat-option>

      </mat-select>
    </mat-form-field>

    <mat-label>Select a fact table (*) </mat-label>
    <mat-form-field >
     
      <mat-select disableRipple id="selectedTables" [(ngModel)]="selectedTables" name="selectedTables">
        <mat-option *ngFor="let obj  of liste_des_table  " [value]="obj" (click)="settable(obj.Name)"> {{ obj.Name }} </mat-option>
      </mat-select>
    </mat-form-field>


  

    <mat-label>Dimention (*)</mat-label>
    <mat-form-field>
      <mat-select [(ngModel)]="selectedObjects" [compareWith]="comparer" >
        <mat-option *ngFor="let el of liste_des_dim" [value]="el" (click)="setAtrFact(el.Name)"  >
          {{el.Name}}
        </mat-option>
      </mat-select>
    </mat-form-field>


    <!-- <mat-form-field>
      <mat-label>Select attributes</mat-label>
      <mat-select multiple>
        <mat-optgroup *ngFor="let group of res" [label]="group.key">
          <mat-option *ngFor="let at of group.liste">{{at.name}}</mat-option>
        </mat-optgroup>
      </mat-select>

    </mat-form-field>
    <br />  -->
    <mat-label> Attribute Fact match (*)  </mat-label>
    <div style="display: flex  ; width: 80%;">
      <section  >
        <mat-form-field>
         
          <mat-select    [compareWith]="comparer" >
            <mat-option *ngFor="let el of liste1 " [value]="el" (click)="setselect1(el)" >
              {{el.Name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>
      
      <section  style="margin-left: 5%;">
        <mat-form-field>
         
          <mat-select    [compareWith]="comparer" >
            <mat-option *ngFor="let el of liste2 " [value]="el" (click)="setselect2(el)" >
              {{el.Name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </section>
   
      <button type="button" [disabled]="obj1 == null || obj2 == null" class="btn btn-primary btn-lg btn-block" (click)="match()" style="margin-left: 10%;"> grouper </button>


    </div>
  <ul>
    <li  *ngFor="let obj of resultat_de_selection " > dim : {{obj.dim}}  : id_dim :{{ obj.obj1.name}}  - cle_fact :{{ obj.obj2.name}} </li>
  </ul>
  <mat-label> Cube Name (*)</mat-label>
        <mat-form-field class="example-full-width">
         
          <input matInput  [(ngModel)]="Cubename">
        </mat-form-field>

    <button   [disabled]="Cubename == null" class="btn btn-primary btn-lg btn-block" (click)="envoyer_data()">
      send 
    </button>
  </div>
   
    





  </div>

  
 


